{"version":3,"sources":["webpack://checkers/./src/core/analyzer.ts","webpack://checkers/./src/core/default_evaluator.ts","webpack://checkers/./src/core/evaluator.ts","webpack://checkers/./src/core/rules.ts","webpack://checkers/./src/core/types.ts","webpack://checkers/./src/core/utils.ts","webpack://checkers/./src/worker.ts","webpack://checkers/webpack/bootstrap","webpack://checkers/webpack/runtime/define property getters","webpack://checkers/webpack/runtime/hasOwnProperty shorthand","webpack://checkers/webpack/runtime/make namespace object","webpack://checkers/webpack/startup"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAwD;AACpB;AAEe;AAEnD,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,4CAAQ,CAAC;AAE9B,0CAA0C;AAC1C,MAAM,KAAK,GAAG,CAAC,CAAC;AAET,SAAS,OAAO,CACrB,KAAgB,EAChB,IAAc,EACd,SAAoB,uDAAgB;IAEpC,0CAA0C;IAC1C,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,iDAAS,CAC3E,KAAK,EACL,IAAI,CACL,CAAC;IAEF,SAAS,IAAI,CAAC,KAAa;QACzB,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QACzB,MAAM,IAAI,GAAG,OAAO,EAAE,CAAC;QACvB,IAAI,SAAS,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC;QAC1B,IAAI,QAAkB,CAAC;QACvB,IAAI,OAAe,CAAC;QAEpB,wDAAwD;QACxD,MAAM,KAAK,GAAG,SAAS,EAAE,CAAC;QAC1B,IAAI,KAAK,CAAC,MAAM,EAAE;YAChB,2CAA2C;YAC3C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBACrC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBAEtB,uCAAuC;gBACvC,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC7B,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7B,OAAO,EAAE,CAAC;gBAEV,iDAAiD;gBACjD,IACE,CAAC,IAAI,KAAK,GAAG,IAAI,OAAO,GAAG,SAAS,CAAC;oBACrC,CAAC,IAAI,KAAK,GAAG,IAAI,OAAO,GAAG,SAAS,CAAC,EACrC;oBACA,QAAQ,GAAG,IAAI,CAAC;oBAChB,SAAS,GAAG,OAAO,CAAC;iBACrB;aACF;SACF;aAAM,IAAI,KAAK,GAAG,CAAC,EAAE;YACpB,2CAA2C;YAC3C,MAAM,KAAK,GAAG,SAAS,EAAE,CAAC;YAE1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBACrC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBAEtB,uCAAuC;gBACvC,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC7B,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7B,OAAO,EAAE,CAAC;gBAEV,iDAAiD;gBACjD,IACE,CAAC,IAAI,KAAK,GAAG,IAAI,OAAO,GAAG,SAAS,CAAC;oBACrC,CAAC,IAAI,KAAK,GAAG,IAAI,OAAO,GAAG,SAAS,CAAC,EACrC;oBACA,QAAQ,GAAG,IAAI,CAAC;oBAChB,SAAS,GAAG,OAAO,CAAC;iBACrB;aACF;SACF;aAAM;YACL,0DAA0D;YAC1D,8BAA8B;YAC9B,SAAS,GAAG,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;SACpC;QAED,+DAA+D;QAC/D,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;IAC/B,CAAC;IAED,oBAAoB;IACpB,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;AACrB,CAAC;;;;;;;;;;;;;;;;;;;;AClF2C;AAE5C,MAAM,gBAAgB,GAAG,yDAAa,EAAE,CAAC;AAEzC,qBAAqB;AACrB,gBAAgB,CAAC,YAAY,CAC3B,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACX,kBAAkB;AAClB;IACE,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;CAClC,CAAC,OAAO,EAAE,CACb,CAAC;AAEF,oBAAoB;AACpB,gBAAgB,CAAC,YAAY,CAC3B,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACX,kBAAkB;AAClB;IACE,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;CAClC,CAAC,OAAO,EAAE,CACb,CAAC;AAEF,kBAAkB;AAClB,gBAAgB,CAAC,YAAY,CAC3B;IACE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;CACX;AACD,kBAAkB;AAClB;IACE,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;CAClC,CAAC,OAAO,EAAE,CACb,CAAC;AAEF,oBAAoB;AACpB,gBAAgB,CAAC,YAAY,CAC3B;IACE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACV,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;CACX;AACD,kBAAkB;AAClB;IACE,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;CAClC,CAAC,OAAO,EAAE,CACb,CAAC;AAEF,iBAAiB;AACjB,gBAAgB,CAAC,YAAY,CAC3B;IACE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;CACZ;AACD,kBAAkB;AAClB;IACE,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;CAClC,CAAC,OAAO,EAAE,CACb,CAAC;AAEF,kBAAkB;AAClB,gBAAgB,CAAC,YAAY,CAC3B;IACE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;CACZ;AACD,kBAAkB;AAClB;IACE,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;CAClC,CAAC,OAAO,EAAE,CACb,CAAC;AAEF,oBAAoB;AACpB,gBAAgB,CAAC,YAAY,CAC3B;IACE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;CACZ;AACD,kBAAkB;AAClB;IACE,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAE,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;IAClC,CAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAE;CAClC,CAAC,OAAO,EAAE,CACb,CAAC;AAEF,iEAAe,gBAAgB,EAAC;;;;;;;;;;;;;;;;;;;;ACtI0C;AAE1E,MAAM,EACJ,KAAK,EACL,SAAS,EACT,QAAQ,EACR,UAAU,EACV,SAAS,EACT,QAAQ,EACR,UAAU,GACX,GAAG,6CAAS,CAAC;AAQP,SAAS,aAAa;IAC3B,yEAAyE;IACzE,2DAA2D;IAC3D,4DAA4D;IAC5D,MAAM,MAAM,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAe,CAAC;IAE9D,SAAS,YAAY,CAAC,SAAwB,EAAE,MAA2B;QACzE,qEAAqE;QACrE,kEAAkE;QAClE,sCAAsC;QACtC,2BAA2B;QAC3B,sCAAsC;QACtC,6BAA6B;QAC7B,gCAAgC;QAChC,iDAAiD;QACjD,wCAAwC;QACxC,2CAA2C;QAC3C,yEAAyE;QACzE,oEAAoE;QAEpE,uDAAuD;QACvD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;YAC1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;gBAC1B,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE3B,IAAI,KAAK,KAAK,CAAC,EAAE;oBACf,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;oBAClC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;iBACvC;aACF;SACF;IACH,CAAC;IAED,SAAS,QAAQ,CAAC,KAAgB;QAChC,sEAAsE;QACtE,mEAAmE;QACnE,sEAAsE;QACtE,qEAAqE;QACrE,yBAAyB;QACzB,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;YAC1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;gBAC1B,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEvB,IAAI,CAAC,EAAE;oBACL,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;wBACjC,MAAM,CAAC,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;wBAChC,IAAI,KAAc,CAAC;wBAEnB,yBAAyB;wBACzB,KAAK,GAAG,IAAI,CAAC;wBACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;4BACzC,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;4BACjC,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;4BAEhC,+CAA+C;4BAC/C,IACE,CAAC,CACC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,KAAK,CAAC;gCAC5B,CAAC,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;gCAC1D,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC;gCACxD,CAAC,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;gCAC1D,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC,CACzD,EACD;gCACA,8BAA8B;gCAC9B,KAAK,GAAG,KAAK,CAAC;gCACd,MAAM;6BACP;yBACF;wBACD,IAAI,KAAK,EAAE;4BACT,KAAK,IAAI,KAAK,CAAC;yBAChB;wBAED,2BAA2B;wBAC3B,KAAK,GAAG,IAAI,CAAC;wBACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;4BACzC,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;4BACjC,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;4BAE5C,6CAA6C;4BAC7C,IACE,CAAC,CACC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,KAAK,CAAC;gCAC5B,CAAC,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;gCAC1D,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC;gCACxD,CAAC,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;gCAC1D,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,UAAU,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC,CACzD,EACD;gCACA,8BAA8B;gCAC9B,KAAK,GAAG,KAAK,CAAC;gCACd,MAAM;6BACP;yBACF;wBACD,IAAI,KAAK,EAAE;4BACT,KAAK,IAAI,KAAK,CAAC;yBAChB;qBACF;iBACF;aACF;SACF;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,OAAO;QACL,SAAS,EAAE,GAAG,EAAE,CAAC,MAAM;QACvB,YAAY;QACZ,QAAQ;KACT,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;;;;;AClImC;AAWnB;AAEjB,MAAM,EAAE,GAAG,EAAE,GAAG,4CAAQ,CAAC;AACzB,MAAM,EAAE,KAAK,EAAE,GAAG,6CAAS,CAAC;AAcrB,SAAS,SAAS,CAAC,MAAiB,EAAE,IAAc;IACzD,kCAAkC;IAClC,MAAM,KAAK,GAAG,iDAAS,CAAC,MAAM,CAAC,CAAC;IAEhC,SAAS,SAAS;QAChB,MAAM,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;QACvB,MAAM,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC;QACvB,MAAM,KAAK,GAAG,EAAgB,CAAC;QAE/B,gCAAgC;QAChC,KAAK,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,IAAI,IAAI,EAAE;YACzC,KAAK,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,IAAI,IAAI,EAAE;gBACzC,wBAAwB;gBACxB,MAAM,CAAC,GAAc,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEjC,IAAI,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;oBAChC,yEAAyE;oBACzE,kEAAkE;oBAClE,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;iBAC3B;aACF;SACF;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,SAAS,QAAQ,CAAC,GAAqB,EAAE,KAAiB;QACxD,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACnC,MAAM,CAAC,GAAc,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,IAAI,GAAG,gDAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAC/B,IAAI,KAAK,GAAG,KAAK,CAAC;QAElB,wDAAwD;QACxD,KAAK,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE;YAC7C,KAAK,IAAI,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE;gBAClC,IAAI,EAAU,CAAC;gBACf,IAAI,EAAU,CAAC;gBACf,IAAI,EAAU,CAAC;gBACf,IAAI,EAAU,CAAC;gBAEf,2CAA2C;gBAC3C,IAAI,IAAI,KAAK,CAAC,EAAE;oBACd,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;oBACZ,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;oBACZ,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;oBACb,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;iBACd;qBAAM;oBACL,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;oBACZ,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;oBACZ,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;oBACb,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;iBACd;gBAED,8BAA8B;gBAC9B,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE;oBAC1C,MAAM,CAAC,GAAc,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;oBACnC,MAAM,CAAC,GAAc,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;oBAEnC,iEAAiE;oBACjE,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;wBACjD,MAAM,OAAO,GAAG,CAAC,IAAI,IAAI,EAAE,KAAK,GAAG,CAAC;wBACpC,KAAK,GAAG,IAAI,CAAC;wBAEb,oDAAoD;wBACpD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;wBACpB,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;wBACtB,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAErC,6DAA6D;wBAC7D,oCAAoC;wBACpC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;wBAC3B,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE;4BACpC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC;yBACzB;wBAED,sCAAsC;wBACtC,GAAG,CAAC,GAAG,EAAE,CAAC;wBACV,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;wBAChB,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;wBAClB,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;qBACvB;iBACF;aACF;SACF;QAED,0DAA0D;QAC1D,OAAO,KAAK,CAAC;IACf,CAAC;IAED,SAAS,MAAM,CAAC,IAAc;QAC5B,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACvB,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,GAAc,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,OAAO,GAAG,iDAAS,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC;QACjD,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,GAAG,CAAa,CAAC;QAEvC,2BAA2B;QAC3B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;QAEpB,iCAAiC;QACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;YAC5B,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YAE7B,mBAAmB;YACnB,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;YACvB,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;SACvB;QAED,cAAc;QACd,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAErC,eAAe;QACf,IAAI,GAAG,CAAC,IAAI,CAAC;QAEb,mBAAmB;QACnB,OAAO,GAAG,EAAE;YACV,yBAAyB;YACzB,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;YAEtB,4CAA4C;YAC5C,KAAK,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;gBAChC,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBAE7B,8BAA8B;gBAC9B,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;aACxB;YAED,yBAAyB;YACzB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAEhB,+BAA+B;YAC/B,IAAI,GAAG,CAAC,IAAI,CAAC;QACf,CAAC,CAAC;IACJ,CAAC;IAED,SAAS,SAAS;QAChB,MAAM,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;QACvB,MAAM,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC;QACvB,MAAM,KAAK,GAAG,EAAgB,CAAC;QAE/B,gCAAgC;QAChC,KAAK,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,IAAI,IAAI,EAAE;YACzC,KAAK,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,IAAI,IAAI,EAAE;gBACzC,MAAM,CAAC,GAAc,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjC,MAAM,IAAI,GAAG,gDAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;gBAE/B,wBAAwB;gBACxB,IAAI,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;oBAChC,wDAAwD;oBACxD,KAAK,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE;wBAC7C,KAAK,IAAI,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE;4BAClC,IAAI,EAAU,CAAC;4BACf,IAAI,EAAU,CAAC;4BAEf,gCAAgC;4BAChC,IAAI,IAAI,KAAK,GAAG,EAAE;gCAChB,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;gCACZ,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;6BACb;iCAAM;gCACL,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;gCACZ,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;6BACb;4BAED,8BAA8B;4BAC9B,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE;gCAC1C,6BAA6B;gCAC7B,IAAI,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,KAAK,EAAE;oCAC3B,KAAK,CAAC,IAAI,CAAC;wCACT,CAAC,CAAC,EAAE,CAAC,CAAC;wCACN,CAAC,EAAE,EAAE,EAAE,CAAC;qCACT,CAAC,CAAC;iCACJ;6BACF;yBACF;qBACF;iBACF;aACF;SACF;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,SAAS,MAAM,CAAC,IAAc;QAC5B,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC;QAChC,MAAM,CAAC,GAAc,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,OAAO,GAAG,iDAAS,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC;QAEjD,mBAAmB;QACnB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;QACpB,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAErC,eAAe;QACf,IAAI,GAAG,CAAC,IAAI,CAAC;QAEb,mBAAmB;QACnB,OAAO,GAAG,EAAE;YACV,sCAAsC;YACtC,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;YACtB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAEhB,cAAc;YACd,IAAI,GAAG,CAAC,IAAI,CAAC;QACf,CAAC,CAAC;IACJ,CAAC;IAED,SAAS,SAAS;QAChB,8BAA8B;QAC9B,MAAM,KAAK,GAAG,SAAS,EAAE,CAAC;QAC1B,IAAI,KAAK,CAAC,MAAM,EAAE;YAChB,OAAO,KAAK,CAAC;SACd;aAAM;YACL,OAAO,SAAS,EAAE,CAAC;SACpB;IACH,CAAC;IAED,SAAS,MAAM,CAAC,IAAc;QAC5B,yDAAyD;QACzD,sBAAsB;QACtB,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;YACtB,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC;SACrB;aAAM;YACL,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC;SACrB;IACH,CAAC;IAED,SAAS,SAAS;QAChB,MAAM,KAAK,GAAG,SAAS,EAAE,CAAC;QAC1B,MAAM,IAAI,GAAa,EAAE,CAAC;QAE1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACrC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,IAAI,GAAG,IAAI,CAAC;YAEhB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBACpC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;gBAEtB,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;gBACxB,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;aAChB;SACF;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAED,OAAO;QACL,QAAQ,EAAE,GAAG,EAAE,CAAC,KAAK;QACrB,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI;QACnB,SAAS;QACT,SAAS;QACT,SAAS;QACT,MAAM;QACN,MAAM;QACN,MAAM;QACN,SAAS;KACV,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACzRD,IAAY,QAGX;AAHD,WAAY,QAAQ;IAClB,qCAAO;IACP,sCAAQ;AACV,CAAC,EAHW,QAAQ,KAAR,QAAQ,QAGnB;AAED,IAAY,SAQX;AARD,WAAY,SAAS;IACnB,2CAAS;IACT,mDAAa;IACb,iDAAY;IACZ,qDAAc;IACd,oDAAc;IACd,kDAAa;IACb,sDAAe;AACjB,CAAC,EARW,SAAS,KAAT,SAAS,QAQpB;AAEM,SAAS,SAAS,CAAC,IAAc,EAAE,KAAgB;IACxD,OAAO,CACL,CAAC,IAAI,KAAK,QAAQ,CAAC,GAAG,IAAI,KAAK,KAAK,SAAS,CAAC,SAAS,CAAC;QACxD,CAAC,IAAI,KAAK,QAAQ,CAAC,GAAG,IAAI,KAAK,KAAK,SAAS,CAAC,SAAS,CAAC,CACzD,CAAC;AACJ,CAAC;AAEM,SAAS,QAAQ,CAAC,IAAc,EAAE,KAAgB;IACvD,OAAO,CACL,CAAC,IAAI,KAAK,QAAQ,CAAC,GAAG,IAAI,KAAK,KAAK,SAAS,CAAC,QAAQ,CAAC;QACvD,CAAC,IAAI,KAAK,QAAQ,CAAC,GAAG,IAAI,KAAK,KAAK,SAAS,CAAC,QAAQ,CAAC,CACxD,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCD,oCAAoC;AACpC,MAAM,OAAO,GAAc,SAAS,CAAC,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1D,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AACnE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AACnE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAEnE,4CAA4C;AACrC,SAAS,QAAQ;IACtB,OAAO,SAAS,CAAC,OAAO,CAAC,CAAC;AAC5B,CAAC;AAED,8DAA8D;AACvD,SAAS,SAAS,CAAC,KAAgB;IACxC,OAAO,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,CAAC;AAED,iDAAiD;AAC1C,SAAS,gBAAgB,CAAC,IAA4B;IAC3D,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;QAC1B,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KACvB;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAED,kDAAkD;AAC3C,SAAS,SAAS,CAAC,GAAgB;IACxC,OAAO;QACL,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,SAAS,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QACzB,IAAI,SAAS,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QACzB,IAAI,SAAS,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QACzB,IAAI,SAAS,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QACzB,IAAI,SAAS,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QACzB,IAAI,SAAS,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;KAC1B,CAAC;AACJ,CAAC;AAEM,SAAS,cAAc,CAAC,CAAS,EAAE,CAAS;IACjD,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AACnC,CAAC;AAEM,SAAS,YAAY,CAAC,IAAc;IACzC,IAAI,IAAI,EAAE;QACR,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACvB,IAAI,GAAG,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAEvC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACpC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YAEzB,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC;YAC1C,GAAG,IAAI,cAAc,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;SAC/B;QAED,OAAO,GAAG,CAAC;KACZ;AACH,CAAC;;;;;;;;;;;;;;;;AC7DyC;AAM1C,IAAI,CAAC,gBAAgB,CACnB,SAAS,EACT,CAAC,EAAkD,EAAE,EAAE;IACrD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC;IAChC,MAAM,CAAC,IAAI,CAAC,GAAG,uDAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IACpC,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;AAC7B,CAAC,EACD,KAAK,CACN,CAAC;;;;;;;UCfF;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"worker-bundle.js","sourcesContent":["import { BoardType, MoveType, SideType } from './types';\nimport { makeRules } from './rules';\nimport { Evaluator } from './evaluator';\nimport defaultEvaluator from './default_evaluator';\n\nconst { RED, WHT } = SideType;\n\n// how many levels deep to search the tree\nconst LEVEL = 8;\n\nexport function analyze(\n  board: BoardType,\n  side: SideType,\n  player: Evaluator = defaultEvaluator\n): readonly [MoveType, number] {\n  // make the rules for the current position\n  const { getBoard, getSide, findJumps, doJump, findMoves, doMove } = makeRules(\n    board,\n    side\n  );\n\n  function loop(level: number): [MoveType, number] {\n    const board = getBoard();\n    const side = getSide();\n    let bestScore = side / -0;\n    let bestPlay: MoveType;\n    let current: number;\n\n    // if there are jumps from this position, keep searching\n    const jumps = findJumps();\n    if (jumps.length) {\n      // analyze counter-jumps from this position\n      for (let i = 0; i < jumps.length; ++i) {\n        const jump = jumps[i];\n\n        // perform the jump and descend a level\n        const reverse = doJump(jump);\n        current = loop(level - 1)[1];\n        reverse();\n\n        // keep track of the best move from this position\n        if (\n          (side === RED && current > bestScore) ||\n          (side === WHT && current < bestScore)\n        ) {\n          bestPlay = jump;\n          bestScore = current;\n        }\n      }\n    } else if (level > 0) {\n      // analyze counter-moves from this position\n      const moves = findMoves();\n\n      for (let i = 0; i < moves.length; ++i) {\n        const move = moves[i];\n\n        // perform the jump and descend a level\n        const reverse = doMove(move);\n        current = loop(level - 1)[1];\n        reverse();\n\n        // keep track of the best move from this position\n        if (\n          (side === RED && current > bestScore) ||\n          (side === WHT && current < bestScore)\n        ) {\n          bestPlay = move;\n          bestScore = current;\n        }\n      }\n    } else {\n      // we've hit bottom and there are no jumps, so just return\n      // the score for this position\n      bestScore = player.evaluate(board);\n    }\n\n    // a pair representing the winning play and score for this turn\n    return [bestPlay, bestScore];\n  }\n\n  // start the descent\n  return loop(LEVEL);\n}\n","import { makeEvaluator } from './evaluator';\n\nconst defaultEvaluator = makeEvaluator();\n\n// basic piece values\ndefaultEvaluator.addFormation(\n  [[0, 0, 1]],\n  // prettier-ignore\n  [ \n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n    [ 50,  0, 50,  0, 50,  0, 50,  0 ],\n    [  0, 50,  0, 50,  0, 50,  0, 50 ],\n    [ 50,  0, 50,  0, 50,  0, 50,  0 ],\n    [  0, 50,  0, 50,  0, 50,  0, 50 ],\n    [ 50,  0, 50,  0, 50,  0, 50,  0 ],\n    [  0, 50,  0, 50,  0, 50,  0, 50 ],\n    [ 50,  0, 50,  0, 50,  0, 50,  0 ],\n   ].reverse()\n);\n\n// basic king values\ndefaultEvaluator.addFormation(\n  [[0, 0, 2]],\n  // prettier-ignore\n  [ \n    [  0, 60,  0, 60,  0, 60,  0, 60 ],\n    [ 60,  0, 60,  0, 60,  0, 60,  0 ],\n    [  0, 60,  0, 60,  0, 60,  0, 60 ],\n    [ 60,  0, 60,  0, 60,  0, 60,  0 ],\n    [  0, 60,  0, 60,  0, 60,  0, 60 ],\n    [ 60,  0, 60,  0, 60,  0, 60,  0 ],\n    [  0, 60,  0, 60,  0, 60,  0, 60 ],\n    [ 60,  0, 60,  0, 60,  0, 60,  0 ],\n   ].reverse()\n);\n\n// offensive lines\ndefaultEvaluator.addFormation(\n  [\n    [0, 0, 3],\n    [1, -1, 3],\n  ],\n  // prettier-ignore\n  [ \n    [  0, 12,  0,  8,  0,  0,  0,  0 ],\n    [ 12,  0, 10,  0,  6,  0,  0,  0 ],\n    [  0, 10,  0,  8,  0,  4,  0,  0 ],\n    [  8,  0,  8,  0,  6,  0,  2,  0 ],\n    [  0,  6,  0,  6,  0,  4,  0,  0 ],\n    [  0,  0,  4,  0,  4,  0,  2,  0 ],\n    [  0,  0,  0,  2,  0,  2,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n   ].reverse()\n);\n\n// offensive 3-lines\ndefaultEvaluator.addFormation(\n  [\n    [0, 0, 3],\n    [1, -1, 3],\n    [2, -2, 3],\n  ],\n  // prettier-ignore\n  [ \n    [  0, 12,  0,  8,  0,  0,  0,  0 ],\n    [ 12,  0, 10,  0,  6,  0,  0,  0 ],\n    [  0, 10,  0,  8,  0,  4,  0,  0 ],\n    [  8,  0,  8,  0,  6,  0,  0,  0 ],\n    [  0,  6,  0,  6,  0,  4,  0,  0 ],\n    [  0,  0,  4,  0,  4,  0,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n   ].reverse()\n);\n\n// triangle bases\ndefaultEvaluator.addFormation(\n  [\n    [0, 0, 3],\n    [1, -1, 3],\n    [-1, -1, 3],\n  ],\n  // prettier-ignore\n  [ \n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n    [  0,  0, 12,  0,  8,  0,  4,  0 ],\n    [  0,  8,  0, 12,  0,  8,  0,  0 ],\n    [  0,  0,  8,  0, 12,  0,  8,  0 ],\n    [  0,  4,  0, 12,  0, 12,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n   ].reverse()\n);\n\n// defensive lines\ndefaultEvaluator.addFormation(\n  [\n    [0, 0, 3],\n    [-1, -1, 3],\n  ],\n  // prettier-ignore\n  [ \n    [  0,  0,  0,  0,  0, 10,  0, 16 ],\n    [  0,  0,  0,  0,  8,  0, 12,  0 ],\n    [  0,  0,  0,  6,  0, 10,  0, 10 ],\n    [  0,  0,  4,  0,  8,  0,  8,  0 ],\n    [  0,  2,  0,  6,  0,  6,  0,  0 ],\n    [  0,  0,  4,  0,  4,  0,  0,  0 ],\n    [  0,  2,  0,  2,  0,  0,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n   ].reverse()\n);\n\n// defensive 3-lines\ndefaultEvaluator.addFormation(\n  [\n    [0, 0, 3],\n    [-1, -1, 3],\n    [-2, -2, 3],\n  ],\n  // prettier-ignore\n  [ \n    [  0,  0,  0,  0,  0, 10,  0, 16 ],\n    [  0,  0,  0,  0,  8,  0, 12,  0 ],\n    [  0,  0,  0,  6,  0, 10,  0, 10 ],\n    [  0,  0,  4,  0,  8,  0,  8,  0 ],\n    [  0,  0,  0,  6,  0,  6,  0,  0 ],\n    [  0,  0,  4,  0,  4,  0,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n    [  0,  0,  0,  0,  0,  0,  0,  0 ],\n   ].reverse()\n);\n\nexport default defaultEvaluator;\n","import { BoardType, FormationType, ScoresType, PieceType } from './types';\n\nconst {\n  EMPTY,\n  WHT_PIECE,\n  WHT_KING,\n  WHT_EITHER,\n  RED_PIECE,\n  RED_KING,\n  RED_EITHER,\n} = PieceType;\n\nexport type Evaluator = {\n  getScores: () => ScoresType;\n  addFormation: (formation: FormationType, scores: readonly number[][]) => void;\n  evaluate: (board: BoardType) => number;\n};\n\nexport function makeEvaluator(): Evaluator {\n  // scores are represented as a 2D array of [pattern, score] pairs, where:\n  //  - `pattern` is an array of [dx, dy, value] triples, and\n  //  - `score` is what will be awarded if the pattern matches\n  const scores = [[], [], [], [], [], [], [], []] as ScoresType;\n\n  function addFormation(formation: FormationType, values: readonly number[][]) {\n    // `formation` takes the form [[dx, dy, v], [dx, dy, v], ...], where:\n    //  - (dx, dy) is the offset from the origin of the formation, and\n    //  - v is the value to match against:\n    //    -  0: an empty square\n    //    - +1: a regular piece on my side\n    //    - +2: a king on my side\n    //    - +3: any piece on my side\n    //    - -1: a regular piece on my opponent's side\n    //    - -2: a king on my opponent's side\n    //    - -3: any piece on my opponent's side\n    // `values` is an 8x8 array of values representing the bonus (or penalty)\n    //    awarded when the formation's origin matches the given position\n\n    // push on the pattern and score for each non-zero slot\n    for (let y = 0; y < 8; ++y) {\n      for (let x = 0; x < 8; ++x) {\n        const value = values[y][x];\n\n        if (value !== 0) {\n          scores[y][x] = scores[y][x] || [];\n          scores[y][x].push([formation, value]);\n        }\n      }\n    }\n  }\n\n  function evaluate(board: BoardType): number {\n    // match the board and side against the formations and return a score:\n    //  - for each square on the board, get the set of formations on it\n    //  - for each formation, see if it applies to red (+) from the top of\n    //      the board, or white (-) from the bottom, and adjust the total\n    //      score accordingly\n    let total = 0;\n\n    for (let y = 0; y < 8; ++y) {\n      for (let x = 0; x < 8; ++x) {\n        const r = scores[y][x];\n\n        if (r) {\n          for (let j = 0; j < r.length; ++j) {\n            const [formation, score] = r[j];\n            let match: boolean;\n\n            // try the pattern as red\n            match = true;\n            for (let k = 0; k < formation.length; ++k) {\n              const [dx, dy, v] = formation[k];\n              const p = board[y + dy][x + dx];\n\n              // see if the formation matches for this square\n              if (\n                !(\n                  (v === EMPTY && p === EMPTY) ||\n                  ((v === RED_PIECE || v === RED_EITHER) && p === RED_PIECE) ||\n                  ((v === RED_KING || v === RED_EITHER) && p === RED_KING) ||\n                  ((v === WHT_PIECE || v === WHT_EITHER) && p === WHT_PIECE) ||\n                  ((v === WHT_KING || v === WHT_EITHER) && p === WHT_KING)\n                )\n              ) {\n                // bail out and flag as failed\n                match = false;\n                break;\n              }\n            }\n            if (match) {\n              total += score;\n            }\n\n            // try the pattern as white\n            match = true;\n            for (let k = 0; k < formation.length; ++k) {\n              const [dx, dy, v] = formation[k];\n              const p = board[(y ^ 7) - dy][(x ^ 7) - dx];\n\n              // see if the pattern matches for this square\n              if (\n                !(\n                  (v === EMPTY && p === EMPTY) ||\n                  ((v === RED_PIECE || v === RED_EITHER) && p === WHT_PIECE) ||\n                  ((v === RED_KING || v === RED_EITHER) && p === WHT_KING) ||\n                  ((v === WHT_PIECE || v === WHT_EITHER) && p === RED_PIECE) ||\n                  ((v === WHT_KING || v === WHT_EITHER) && p === RED_KING)\n                )\n              ) {\n                // bail out and flag as failed\n                match = false;\n                break;\n              }\n            }\n            if (match) {\n              total -= score;\n            }\n          }\n        }\n      }\n    }\n\n    return total;\n  }\n\n  return {\n    getScores: () => scores,\n    addFormation,\n    evaluate,\n  };\n}\n","import { copyBoard } from './utils';\n\nimport {\n  BoardType,\n  MoveType,\n  SideType,\n  PieceType,\n  TreeType,\n  isPieceOf,\n  isKingOf,\n  _MutableMoveType,\n} from './types';\n\nconst { RED } = SideType;\nconst { EMPTY } = PieceType;\n\nexport type Rules = {\n  readonly getBoard: () => BoardType;\n  readonly getSide: () => SideType;\n  readonly findJumps: () => readonly MoveType[];\n  readonly findMoves: () => readonly MoveType[];\n  readonly findPlays: () => readonly MoveType[];\n  readonly doJump: (jump: MoveType) => () => void;\n  readonly doMove: (move: MoveType) => () => void;\n  readonly doPlay: (play: MoveType) => () => void;\n  readonly buildTree: () => TreeType;\n};\n\nexport function makeRules(_board: BoardType, side: SideType): Rules {\n  // don't mutate the caller's board\n  const board = copyBoard(_board);\n\n  function findJumps(): readonly MoveType[] {\n    const top = side === RED ? 7 : 0;\n    const out = top + side;\n    const bottom = top ^ 7;\n    const jumps = [] as MoveType[];\n\n    // loop through playable squares\n    for (let y = bottom; y !== out; y += side) {\n      for (let x = bottom; x !== out; x += side) {\n        // see if it's our piece\n        const p: PieceType = board[y][x];\n\n        if (side === RED ? p > 0 : p < 0) {\n          // checking for jumps is inherently recursive - as long as you find them,\n          // you have to keep looking, and only termimal positions are valid\n          nextJump([[x, y]], jumps);\n        }\n      }\n    }\n\n    return jumps;\n  }\n\n  function nextJump(cur: _MutableMoveType, jumps: MoveType[]) {\n    const [x, y] = cur[cur.length - 1];\n    const p: PieceType = board[y][x];\n    const top = side === RED ? 7 : 0;\n    const king = isKingOf(side, p);\n    let found = false;\n\n    // loop over directions (dx, dy) from the current square\n    for (let dy = king ? -1 : 1; dy <= 1; dy += 2) {\n      for (let dx = -1; dx <= 1; dx += 2) {\n        let mx: number;\n        let my: number;\n        let nx: number;\n        let ny: number;\n\n        // calculate middle and landing coordinates\n        if (side === 1) {\n          mx = x + dx;\n          my = y + dy;\n          nx = mx + dx;\n          ny = my + dy;\n        } else {\n          mx = x - dx;\n          my = y - dy;\n          nx = mx - dx;\n          ny = my - dy;\n        }\n\n        // see if jump is on the board\n        if (nx >= 0 && nx < 8 && ny >= 0 && ny < 8) {\n          const m: PieceType = board[my][mx];\n          const n: PieceType = board[ny][nx];\n\n          // see if the middle piece is an opponent and the landing is open\n          if (n === EMPTY && (side === RED ? m < 0 : m > 0)) {\n            const crowned = !king && ny === top;\n            found = true;\n\n            // keep track of the coordinates, and move the piece\n            board[y][x] = EMPTY;\n            board[my][mx] = EMPTY;\n            board[ny][nx] = crowned ? p << 1 : p;\n\n            // if we're crowned, or there are no further jumps from here,\n            // we've reached a terminal position\n            cur.push([nx, ny, mx, my]);\n            if (crowned || !nextJump(cur, jumps)) {\n              jumps.push(cur.slice());\n            }\n\n            // put things back where we found them\n            cur.pop();\n            board[y][x] = p;\n            board[my][mx] = m;\n            board[ny][nx] = EMPTY;\n          }\n        }\n      }\n    }\n\n    // return whether more jumps were found from this position\n    return found;\n  }\n\n  function doJump(jump: MoveType): () => void {\n    const len = jump.length;\n    const [x, y] = jump[0];\n    const [fx, fy] = jump[len - 1];\n    const p: PieceType = board[y][x];\n    const top = side === RED ? 7 : 0;\n    const crowned = isPieceOf(side, p) && fy === top;\n    const cap = new Array(len) as number[];\n\n    // remove the initial piece\n    cap[0] = p;\n    board[y][x] = EMPTY;\n\n    // loop over the passed in coords\n    for (let i = 1; i < len; ++i) {\n      const [, , mx, my] = jump[i];\n\n      // perform the jump\n      cap[i] = board[my][mx];\n      board[my][mx] = EMPTY;\n    }\n\n    // final piece\n    board[fy][fx] = crowned ? p << 1 : p;\n\n    // switch sides\n    side = -side;\n\n    // reverse the jump\n    return () => {\n      // remove the final piece\n      board[fy][fx] = EMPTY;\n\n      // loop over the passed in coords in reverse\n      for (let i = len - 1; i > 0; --i) {\n        const [, , mx, my] = jump[i];\n\n        // put back the captured piece\n        board[my][mx] = cap[i];\n      }\n\n      // put back initial piece\n      board[y][x] = p;\n\n      // switch back to original side\n      side = -side;\n    };\n  }\n\n  function findMoves(): readonly MoveType[] {\n    const top = side === RED ? 7 : 0;\n    const out = top + side;\n    const bottom = top ^ 7;\n    const moves = [] as MoveType[];\n\n    // loop through playable squares\n    for (let y = bottom; y !== out; y += side) {\n      for (let x = bottom; x !== out; x += side) {\n        const p: PieceType = board[y][x];\n        const king = isKingOf(side, p);\n\n        // see if it's our piece\n        if (side === RED ? p > 0 : p < 0) {\n          // loop over directions (dx, dy) from the current square\n          for (let dy = king ? -1 : 1; dy <= 1; dy += 2) {\n            for (let dx = -1; dx <= 1; dx += 2) {\n              let nx: number;\n              let ny: number;\n\n              // calculate landing coordinates\n              if (side === RED) {\n                nx = x + dx;\n                ny = y + dy;\n              } else {\n                nx = x - dx;\n                ny = y - dy;\n              }\n\n              // see if move is on the board\n              if (nx >= 0 && nx < 8 && ny >= 0 && ny < 8) {\n                // see if the landing is open\n                if (board[ny][nx] === EMPTY) {\n                  moves.push([\n                    [x, y],\n                    [nx, ny],\n                  ]);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return moves;\n  }\n\n  function doMove(move: MoveType): () => void {\n    const [[x, y], [nx, ny]] = move;\n    const p: PieceType = board[y][x];\n    const top = side === RED ? 7 : 0;\n    const crowned = isPieceOf(side, p) && ny === top;\n\n    // perform the jump\n    board[y][x] = EMPTY;\n    board[ny][nx] = crowned ? p << 1 : p;\n\n    // switch sides\n    side = -side;\n\n    // reverse the move\n    return () => {\n      // put things back where we found them\n      board[ny][nx] = EMPTY;\n      board[y][x] = p;\n\n      // switch back\n      side = -side;\n    };\n  }\n\n  function findPlays(): readonly MoveType[] {\n    // you have to jump if you can\n    const jumps = findJumps();\n    if (jumps.length) {\n      return jumps;\n    } else {\n      return findMoves();\n    }\n  }\n\n  function doPlay(play: MoveType): () => void {\n    // if the second segment has coords for the jumped piece,\n    // it has to be a jump\n    if (play[1].length > 2) {\n      return doJump(play);\n    } else {\n      return doMove(play);\n    }\n  }\n\n  function buildTree(): TreeType {\n    const plays = findPlays();\n    const tree: TreeType = {};\n\n    for (let i = 0; i < plays.length; ++i) {\n      const play = plays[i];\n      let root = tree;\n\n      for (let j = 0; j < play.length; ++j) {\n        const [x, y] = play[j];\n        const k = `${x},${y}`;\n\n        root[k] = root[k] || {};\n        root = root[k];\n      }\n    }\n\n    return tree;\n  }\n\n  return {\n    getBoard: () => board,\n    getSide: () => side,\n    findJumps,\n    findMoves,\n    findPlays,\n    doJump,\n    doMove,\n    doPlay,\n    buildTree,\n  };\n}\n","export type BoardType = Int8Array[];\nexport type SegmentType =\n  | readonly [number, number]\n  | readonly [number, number, number, number];\nexport type MoveType = readonly SegmentType[];\nexport type _MutableMoveType = SegmentType[]; // used internally to build up moves\nexport type TreeType = { [key: string]: TreeType };\nexport type FormationType = readonly [number, number, PieceType][];\nexport type ScoresType = readonly [FormationType, number][][][];\n\nexport enum SideType {\n  RED = 1,\n  WHT = -1,\n}\n\nexport enum PieceType {\n  EMPTY = 0,\n  RED_PIECE = 1,\n  RED_KING = 2,\n  RED_EITHER = 3,\n  WHT_PIECE = -1,\n  WHT_KING = -2,\n  WHT_EITHER = -3,\n}\n\nexport function isPieceOf(side: SideType, piece: PieceType): boolean {\n  return (\n    (side === SideType.RED && piece === PieceType.RED_PIECE) ||\n    (side === SideType.WHT && piece === PieceType.WHT_PIECE)\n  );\n}\n\nexport function isKingOf(side: SideType, piece: PieceType): boolean {\n  return (\n    (side === SideType.RED && piece === PieceType.RED_KING) ||\n    (side === SideType.WHT && piece === PieceType.WHT_KING)\n  );\n}\n","import { BoardType, MoveType, PieceType } from './types';\n\n// set up the initial board position\nconst initial: BoardType = as2DArray(new ArrayBuffer(64));\ninitial[0][0] = initial[0][2] = initial[0][4] = initial[0][6] = 1;\ninitial[1][1] = initial[1][3] = initial[1][5] = initial[1][7] = 1;\ninitial[2][0] = initial[2][2] = initial[2][4] = initial[2][6] = 1;\ninitial[5][1] = initial[5][3] = initial[5][5] = initial[5][7] = -1;\ninitial[6][0] = initial[6][2] = initial[6][4] = initial[6][6] = -1;\ninitial[7][1] = initial[7][3] = initial[7][5] = initial[7][7] = -1;\n\n// make a copy of the initial board position\nexport function newBoard(): BoardType {\n  return copyBoard(initial);\n}\n\n// only use this on boards that are backed by a shared buffer!\nexport function copyBoard(board: BoardType): BoardType {\n  return as2DArray(board[0].buffer.slice(0));\n}\n\n// make a new board from the passed in array data\nexport function newBoardFromData(data: readonly PieceType[][]): BoardType {\n  const board = as2DArray(new ArrayBuffer(64));\n  for (let i = 0; i < 8; ++i) {\n    board[i].set(data[i]);\n  }\n  return board;\n}\n\n// make a 2d array wrapper around a 64-byte buffer\nexport function as2DArray(buf: ArrayBuffer): BoardType {\n  return [\n    new Int8Array(buf, 0, 8),\n    new Int8Array(buf, 8, 8),\n    new Int8Array(buf, 16, 8),\n    new Int8Array(buf, 24, 8),\n    new Int8Array(buf, 32, 8),\n    new Int8Array(buf, 40, 8),\n    new Int8Array(buf, 48, 8),\n    new Int8Array(buf, 56, 8),\n  ];\n}\n\nexport function coordsToNumber(x: number, y: number): number {\n  return ((y + 1) << 2) - (x >> 1);\n}\n\nexport function moveToString(move: MoveType): string {\n  if (move) {\n    const [x, y] = move[0];\n    let str = String(coordsToNumber(x, y));\n\n    for (let i = 1; i < move.length; ++i) {\n      const [nx, ny] = move[i];\n\n      str += move[i].length > 2 ? ' x ' : ' - ';\n      str += coordsToNumber(nx, ny);\n    }\n\n    return str;\n  }\n}\n","import { BoardType, SideType } from './core/types';\nimport { analyze } from './core/analyzer';\n\n// tell typescript that we're in a web worker, as the\n// postMessage API is slightly different\ndeclare const self: DedicatedWorkerGlobalScope;\n\nself.addEventListener(\n  'message',\n  (ev: { data: { board: BoardType; side: SideType } }) => {\n    const { board, side } = ev.data;\n    const [move] = analyze(board, side);\n    self.postMessage({ move });\n  },\n  false\n);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/worker.ts\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}